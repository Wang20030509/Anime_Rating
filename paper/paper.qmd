---
title: "Exploring the Relationship Between Anime Scores, Popularity, and Favorites"
subtitle: "A Correlation Analysis of Anime Ranking"
author: 
  -Doran Wang
thanks: "Code and data are available at: [https://github.com/Wang20030509/Anime_Rating](https://github.com/Wang20030509/Anime_Rating)."
date: today
date-format: long
abstract: "This paper explores the relationship between anime scores, popularity, and favorites by leveraging data obtained from the MyAnimeList API. The dataset was created by extracting ranking data through the API and transforming it into a comprehensive new dataset. Using this data, I conducted an analysis to investigate how popularity and favorites influence anime scores.The primary hypothesis is that popularity has a stronger impact on anime scores—higher popularity is expected to correlate with higher scores. Additionally, I predict that a higher number of favorites also contributes to an increase in scores. The analysis aims to provide insights into these relationships and quantify their respective influences."
format: pdf
toc: true
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(arrow)
library(knitr)

raw_data <- read_parquet("../data/01-raw_data/anime_data.parquet")
anime_data <- read_parquet("../data/02-analysis_data/cleaned_data.parquet")
```


# Introduction

Anime has evolved from a niche entertainment medium to a global cultural phenomenon, with millions of viewers and dedicated fan communities around the world. As part of this growth, platforms like MyAnimeList [@myanimelist] have become key hubs for anime enthusiasts to rate, review, and interact with anime content. These platforms generate vast amounts of data that can provide insights into user preferences and trends in anime reception. MyAnimeList, in particular, offers detailed metadata for thousands of anime titles, including user-generated ratings, popularity scores, and other key metrics such as the number of favorites. This paper leverages data from the MyAnimeList API [@malAPI] to explore the relationships between anime scores, popularity, and favorites.

The central estimand of this study is the relationship between the popularity and number of favorites of an anime and its score, as recorded on MyAnimeList. Specifically, this research seeks to quantify how these factors—popularity and favorites—affect the overall score of an anime title. We hypothesize that higher popularity and a larger number of favorites will be positively correlated with higher scores. This analysis aims to provide a clearer understanding of the magnitude and direction of these effects, offering insights into what drives anime success on community-driven platforms.

The analysis confirms that there is a significant positive relationship between both popularity and the number of favorites with anime scores. Popularity, measured by the number of users who rated an anime, is found to have a particularly strong influence on scores, supporting the hypothesis that more popular anime tend to receive higher ratings. Similarly, the number of favorites is positively associated with scores, indicating that anime with greater fan engagement tend to receive better ratings. These findings highlight the importance of community interaction and popularity in determining the perceived quality of anime.

Understanding the factors that influence anime ratings is crucial for several reasons. For anime creators and studios, it can provide insights into audience preferences, guiding future production and marketing strategies. For platform developers, such as MyAnimeList, it helps improve user experience by understanding how to foster engagement and enhance the visibility of popular titles. Additionally, this research contributes to the broader field of data-driven analysis in entertainment media, providing a model for evaluating user engagement in other areas of digital content.

The remainder of this paper is structured as follows: @sec-data provides an overview of the dataset, describing the data collected from the MyAnimeList API [@malAPI]. @sec-model presents the modeling approach, which includes correlation analysis and linear regression to assess the relationships between the variables. @sec-result presents the analysis results, followed by a discussion of the implications and limitations in @sec-discussion.



# Data {#sec-data}

## Overview

For this analysis, the dataset was compiled using data extracted from the MyAnimeList API, which provides key variables such as anime titles, scores, popularity, and the number of list users. The "number of favorites" data, however, was not available through the API, so it was manually compiled by directly listing the values from the MyAnimeList website and included in the dataset for analysis. These data points were then cleaned and processed for analysis using the statistical programming software R [@citeR]. The analysis utilized several R packages from the tidyverse [@citeTidyverse], including dplyr [@citeDplyr] for data wrangling, ggplot2 [@citeGgplot] for visualization and ``knitr` [@citeKnitr]`. Data processing tasks, such as handling missing values and transforming variables, were carried out to ensure the dataset was ready for analysis.

The dataset contains observations for hundreds of anime titles, each accompanied by their respective attributes. The data was collected from a variety of genres, years, and user ratings, ensuring a comprehensive snapshot of anime as rated by MyAnimeList users. Following the methodology described in @tellingstories, we consider the correlation between popularity, favorites, and scores to explore the factors that influence anime ratings.

## Measurement
	
The dataset used in this study was compiled from the MyAnimeList API, which provides a variety of metrics related to anime titles. The data collection spans a broad range of anime, including series from different genres, release years, and popularity levels. Each entry in the dataset represents a unique anime title, and the associated variables include score, popularity, number of list users, and number of favorites, among others.

To measure popularity, the popularity score is derived from the total number of users who have rated or added the anime to their lists on MyAnimeList. This variable provides a rough indication of how well-known or widely watched a particular anime is within the community.

The score variable is an average rating based on user feedback, with each user rating an anime on a scale from 1 to 10. The score reflects the collective opinion of MyAnimeList users and is a key metric for understanding the general reception of an anime.

The number of favorites, which was not provided directly by the API, was manually compiled by listing the number of favorites for each anime directly from the MyAnimeList website. This variable reflects how many users have specifically marked an anime as a "favorite," which can be interpreted as a more personal, long-term engagement with the title. Since it was manually compiled, the accuracy of this data depends on the consistency of the manual entries across titles.

To ensure consistency and reliability, all metrics were extracted using the MyAnimeList API’s standardized definitions, and the dataset was processed and cleaned using R [@citeR] and the tidyverse [@citeTidyverse] packages. Missing data were handled appropriately, with rows containing missing values being excluded from the analysis.

This dataset allows us to explore how factors like popularity and favorites influence anime scores. By correlating these variables, we aim to better understand the elements that contribute to higher ratings and broader appeal among the anime community. However, it is important to note that there are some limitations to these measurements. The popularity and score data are based solely on MyAnimeList users, and therefore may not fully represent the global anime audience. Additionally, the manual compilation of the number of favorites introduces a potential source of human error, though efforts were made to ensure accuracy.

These variables, combined with the rich data provided by the MyAnimeList API, enable an in-depth analysis of anime ratings, offering valuable insights into the factors that influence the perception of anime quality in the community.



## Raw Data
The raw dataset, which shows in @tbl-raw-anime-scores in Appendix @sec-data-details, used in this study was sourced from the MyAnimeList API and contains several important variables, as shown in the below. The dataset includes 200 anime titles, each represented by the following columns:

 - id: A unique identifier for each anime title in the dataset.
 - title: The name of the anime.
 - mean: The average score given by users, ranging from 1 to 10.
 - popularity: The rank of the anime based on the number of users who have added the anime to their list. (1 means the highest)
 - num_list_users: The number of users who have added the anime to their list (either for watching, completed, etc.).
 - rank: The rank of the anime based on its popularity among other titles.
 - num_scoring_users: The number of users who have rated the anime.


## Cleaned 

```{r}
#| label: tbl-anime-scores
#| tbl-cap: "Preview of the anime scores dataset"
#| message: false
#| echo: false

colnames(anime_data) <- c("Title", "Score", "rank", "Popularity", "Number of List Users","Number of Scoring Users", "Number of Favorites" , "Most Favorited")

anime_data[1:5, 1:7] |>
  kable()

```

The cleaned dataset shows in @tbl-anime-scores, used in this study builds upon the raw data extracted from the MyAnimeList API. In addition to the original variables—such as score, popularity, number of list users, rank, and number of scoring users—two new columns were created to enhance the analysis: rank_favorites and num_favorites.

 - rank_favorites: This new variable was created by sorting the anime titles according to the number of favorites. The rank is based on the order of the number of favorites, allowing for a more specific understanding of anime popularity from a fan engagement perspective. It essentially ranks the anime based on how much attention and affection it has garnered from the community in terms of user engagement with the "favorite" feature.

 - num_favorites: The number of favorites is another newly added variable that was not available in the original MyAnimeList API data. This data was manually compiled by directly listing the number of favorites for each anime from the MyAnimeList website. This manual entry was necessary as the API did not provide this metric, and it offers insight into user preferences and long-term engagement with anime titles.

After these new columns were added, the dataset was cleaned and processed to remove missing or irrelevant values, ensuring that only the most complete and relevant data were used for analysis. The cleaned dataset now provides a comprehensive view of how popularity, favorites, and scores interact to influence the ratings and reception of anime titles.




## Data Visualization
The outcome variable in this analysis is the anime score, which is a critical metric for understanding the general reception of an anime by the MyAnimeList community. The anime score is an average rating given by users of MyAnimeList on a scale from 1 to 10. It reflects the collective opinion of the community and is often used as a benchmark for the quality and popularity of anime titles. 

### Popularity

```{r}
#| label: fig-popularity
#| fig-cap: "Relationship between popularity and anime scores"
#| echo: false
#| warning: false
#| message: false

ggplot(anime_data, aes(x = `Number of List Users`, y = Score)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE, color = "blue") +
  labs(title = "Anime Popularity vs. Score", x = "Number of List Users ", y = "Score")

```
The popularity variable is a key predictor that measures how widely known an anime is, as indicated by the number of users who have rated it. The higher the popularity score, the more likely it is that the anime has a larger audience, which we expect will correlate with a higher score. Similarly, number of favorites reflects the level of long-term engagement with an anime. Users who favorite an anime are signaling a deeper personal attachment or preference for it, and this engagement is expected to positively influence its score.


### Favorites
```{r}
#| label: fig-favorites
#| fig-cap: "Effect of number of favorites on anime scores"
#| echo: false
#| warning: false
#| message: false

ggplot(anime_data, aes(x = `Number of Favorites`, y = Score)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE, color = "red") +
  labs(title = "Number of Favorites vs. Anime Score", x = "Number of Favorites", y = "Score")

```
We also consider the ranking of anime, which is another important aspect influencing its visibility and perceived quality. Higher-ranked anime typically have higher scores, as they are often more popular or well-received by the community.

These outcome variables—anime score, popularity, and number of favorites—are central to this analysis. By examining how these variables interact, we aim to gain a deeper understanding of the dynamics between anime ratings and community engagement.


# Model {#sec-model}

The goal of our modeling strategy is twofold. Firstly, we aim to explore the relationship between the anime score (the dependent variable) and key predictors such as popularity and number of favorites (the independent variables). Secondly, we seek to quantify how these variables contribute to predicting the anime score using a linear regression model and, if necessary, a Bayesian framework to account for uncertainty and prior beliefs.

Here, we briefly describe the linear regression model used to investigate how popularity and number of favorites influence anime scores. Additional background details and diagnostics are included in [Appendix - @sec-model-details].

## Model set-up

Define $y_i$ as the anime score for anime $i$, which represents the average rating given by users on MyAnimeList. Let $x_{i1}$ be popularity and $x_{i2}$ be the number of favorites for the anime. The model assumes that the anime score is linearly related to these predictors.


\begin{align}
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_1 \times \mbox{popularity}_i + \beta_2 \times \mbox{favorites}_i \\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta_1 &\sim \mbox{Normal}(0, 2.5) \\
\beta_2 &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}

Where:
$y_i$ is the anime score for anime $i$,
$\mu_i$ is the expected score for anime $i$ based on the predictors,
popularity is the number of users who have the anime in their list,
favorites is the manually compiled number of favorites for the anime,
$\alpha$ is the intercept term,
$\beta_1$ and $\beta_2$ are the regression coefficients for popularity and number of favorites,
$\sigma$ is the standard deviation of the residuals (i.e., the model error).
We run the model in R [@citeR] using the rstanarm package from @rstanarm. The priors are chosen to be non-informative, with default values based on the assumption that we have little prior knowledge about the relationships between the variables


### Model justification

We expect a positive relationship between popularity and anime score. Specifically, we hypothesize that more popular anime, which have a higher number of ratings, are likely to receive higher average scores. Similarly, we expect that a higher number of favorites will also lead to higher anime scores, reflecting stronger fan engagement with the title.

By using this model, we aim to quantify the strength of these relationships and gain insights into the factors that contribute to a title’s success in terms of user ratings on MyAnimeList.


# Results {#sec-result}

Our results are summarized in @tbl-modelresults.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false

library(rstanarm)


```

```{r}
#| echo: false
#| eval: true
#| label: tbl-modelresults
#| tbl-cap: "Explanatory models of flight time based on wing width and wing length"
#| warning: false


```




# Discussion {#sec-discussion}

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

Please don't use these as sub-heading labels - change them to be what your point actually is.

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}


# Additional data details {#sec-data-details}

```{r}
#| label: tbl-raw-anime-scores
#| tbl-cap: "The Raw Dataset of the anime scores dataset (only first 5 rows)"
#| message: false
#| warning: false
#| echo: false

raw_data[1:5, 1:3]|>
  kable()

raw_data[1:5, 4:ncol(raw_data)]|>
  kable()
```

Here is how the score(mean) calculated:
All scores given in the database are calculated as a weighted score.

Weighted Score = $(v / (v + m)) * S + (m / (v + m)) * C$

$S$ = Average score for the anime/manga
$v$ = Number users giving a score for the anime/manga †
$m$ = Minimum number of scored users required to get a calculated score
$C$ = The mean score across the entire Anime/Manga database

† Note that v does not correspond to the "number of scored users" as seen on the database page. Scores from users who have not viewed 1/5 of the series upon its completion are not included. Scores given from illegitimate accounts created to sway votes are also not included in the scoring algorithm.

Not Yet Aired entries have no score and will display N/A. Entries that do not meet the minimum number of scored users will also not display a calculated score.

Top Anime/Manga Rankings
The "Top Upcoming" and "Most Popular" rankings are ordered by the number of users who have added the entry to their list. All other Top Anime and Top Manga rankings are ordered by weighted score, as calculated above. Please note that while R18+ entries calculate a weighted score, they are excluded from the rankings. Music Videos are also excluded from Top Anime.

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 

```{r}
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| label: fig-ppcheckandposteriorvsprior
#| layout-ncol: 2
#| fig-cap: "Examining how the model fits, and is affected by, the data"
#| fig-subcap: ["Posterior prediction check", "Comparing the posterior with the prior"]


```

## Diagnostics

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...

```{r}
#| echo: false
#| eval: true
#| message: false
#| warning: false
#| label: fig-stanareyouokay
#| fig-cap: "Checking the convergence of the MCMC algorithm"
#| fig-subcap: ["Trace plot", "Rhat plot"]
#| layout-ncol: 2


```



\newpage


# References


